# REST API Architecture Example

## What is an API?

An **API** (Application Programming Interface) is a set of rules and endpoints that allows different software applications to communicate with each other. APIs expose data and functionality, enabling integration between systems.

## What is a REST API?

A **REST API** (Representational State Transfer) is an architectural style for designing networked applications. It uses HTTP methods (GET, POST, PUT, DELETE) to perform operations on resources, which are represented as URLs.

## What is RESTful?

A **RESTful API** is an API that follows REST principles:
- Uses HTTP methods correctly
- Uses plural nouns for resources (`/clients`, `/products`)
- Is stateless (each request contains all information needed)
- Uses proper status codes
- Provides resource representations (usually JSON)
- Supports filtering, pagination, and HATEOAS (Hypermedia as the Engine of Application State)

## Project Structure

```
rest-api-architecture/
│
├── config/                  # Environment configuration files
│   ├── .env.development
│   ├── .env.staging
│   └── .env.production
├── controllers/             # Business logic for each resource
│   ├── clientsController.js
│   └── productsController.js
├── routes/                  # API route definitions
│   ├── clients.js
│   └── products.js
├── db/                      # Database scripts and seeds
│   └── seed.sql
├── logs/                    # Application logs
│   └── app.log
├── clients.json             # Example data for clients (if using JSON storage)
├── products.json            # Example data for products (if using JSON storage)
├── server.js                # Main application entry point
├── swagger.yaml             # OpenAPI/Swagger documentation
└── README.md                # Project documentation
```

### Folder and File Descriptions
- **config/**: Environment variables for different stages (development, staging, production).
- **controllers/**: Functions that handle business logic for each resource (clients, products, etc).
- **routes/**: Express route definitions, mapping endpoints to controller functions.
- **db/**: SQL scripts for creating and seeding the database (for real DB usage).
- **logs/**: Application logs generated by Winston.
- **clients.json / products.json**: Example data files for quick prototyping or fallback if not using a real database.
- **server.js**: Main Express server setup and middleware configuration.
- **swagger.yaml**: OpenAPI documentation for the API, used by Swagger UI.
- **README.md**: This documentation file.

## Features & Best Practices

- **Versioning:** All endpoints are under `/api/v1/` (easy to evolve the API without breaking old clients)
- **Resources:** Example resources `/clients` and `/products`
- **Filtering, Pagination, Sorting:** Query params like `?name=Ana&page=1&limit=10&sort=name`
- **HATEOAS:** Responses include navigation links
- **Security:** [helmet](https://www.npmjs.com/package/helmet) for HTTP headers
- **Rate Limiting:** [express-rate-limit](https://www.npmjs.com/package/express-rate-limit) to prevent abuse
- **CORS:** [cors](https://www.npmjs.com/package/cors) enabled for cross-origin requests
- **Logging:** [winston](https://www.npmjs.com/package/winston) for file and console logs
- **Error Handling:** Centralized error handler with meaningful messages and status codes
- **Environment Variables:** Managed with `.env` files in `/config`
- **Swagger/OpenAPI:** API documentation at `/api-docs` (if configured)
- **Health Check:** `/api/v1/health` endpoint

## Error Messages

- `400 Bad Request`: Missing or invalid data
- `404 Not Found`: Resource not found
- `409 Conflict`: Duplicate resource (e.g., email already exists)
- `429 Too Many Requests`: Rate limit exceeded
- `500 Internal Server Error`: Unexpected server error

## How to Run

1. **Install dependencies:**
   ```sh
   npm install
   ```

2. **Configure environment:**
   - Edit `config/.env.development`:
     ```
     PORT=3000
     NODE_ENV=development
     ```

3. **Start the server:**
   ```sh
   NODE_ENV=development node server.js
   ```

4. **Test endpoints:**
   - Health: [http://localhost:3000/api/v1/health](http://localhost:3000/api/v1/health)
   - Clients: [http://localhost:3000/api/v1/clients](http://localhost:3000/api/v1/clients)
   - Products: [http://localhost:3000/api/v1/products](http://localhost:3000/api/v1/products)

## Using Postman

### Example Requests

#### Clients
- **GET all clients:**
  ```
  GET http://localhost:3000/api/v1/clients
  ```
- **GET client by ID:**
  ```
  GET http://localhost:3000/api/v1/clients/1
  ```
- **POST new client:**
  ```
  POST http://localhost:3000/api/v1/clients
  Body (JSON):
  {
    "name": "Ana",
    "email": "ana@test.com"
  }
  ```
- **PUT update client:**
  ```
  PUT http://localhost:3000/api/v1/clients/1
  Body (JSON):
  {
    "name": "Ana Maria",
    "email": "ana.maria@test.com"
  }
  ```
- **DELETE client:**
  ```
  DELETE http://localhost:3000/api/v1/clients/1
  ```

#### Products
- **GET all products:**
  ```
  GET http://localhost:3000/api/v1/products
  ```
- **GET product by ID:**
  ```
  GET http://localhost:3000/api/v1/products/1
  ```
- **POST new product:**
  ```
  POST http://localhost:3000/api/v1/products
  Body (JSON):
  {
    "name": "Dell Inspiron 15 Laptop",
    "price": 3500.00
  }
  ```
- **PUT update product:**
  ```
  PUT http://localhost:3000/api/v1/products/1
  Body (JSON):
  {
    "name": "Dell Inspiron 15 Plus",
    "price": 4000.00
  }
  ```
- **DELETE product:**
  ```
  DELETE http://localhost:3000/api/v1/products/1
  ```

## Good RESTful Practices

- Use plural nouns for resources (`/clients`, `/products`)
- Use HTTP methods correctly (GET, POST, PUT, DELETE)
- Return appropriate status codes
- Provide clear error messages
- Support filtering, pagination, and sorting
- Use HATEOAS for discoverability
- Secure your API (rate limiting, helmet, CORS)
- Log requests and errors
- Document your API (Swagger/OpenAPI)
- Use versioning in your API paths (e.g., `/api/v1/`)

## Swagger/OpenAPI

This project includes a `swagger.yaml` file for API documentation. You can serve it using [swagger-ui-express](https://www.npmjs.com/package/swagger-ui-express):

```js
const swaggerUi = require('swagger-ui-express');
const YAML = require('yamljs');
const swaggerDocument = YAML.load('./swagger.yaml');
app.use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerDocument));
```

- Access the documentation at: [http://localhost:3000/api-docs](http://localhost:3000/api-docs)
- The documentation is grouped by resource (Clients, Products) using tags.
- All endpoints are versioned under `/api/v1/` for future-proofing and backward compatibility.
- You can try out requests directly from the Swagger UI.

## Database

- The project can be easily adapted to use a real database (see `db/seed.sql` for an example with SQL Server/MySQL).
- For production, replace the in-memory or JSON storage with a proper database connection.
- Example data files (`clients.json`, `products.json`) are included for quick prototyping or fallback.

---

Feel free to fork, contribute, or use this project as a learning base for RESTful API design!
